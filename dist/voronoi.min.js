!function(){function a(a){this._canvas=a,this._scene=new THREE.Scene,this._camera=new THREE.OrthographicCamera(0,a.width,a.height,0,1,1e3),this._camera.position.z=2,this._renderer=new THREE.WebGLRenderer({canvas:a}),this._renderer.setClearColor(0),this._material_cache={}}function b(b){function c(a){var b={canvas:null,width:500,height:500,precision:16,distanceMeasure:e.euclidean};return"undefined"==typeof a?b:(a.canvas=a.canvas||null,a.width=+a.width||b.width,a.height=+a.height||b.height,a.precision=+a.precision||b.precision,a.distanceMeasure=a.distanceMeasure||b.distanceMeasure,a)}function f(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c}b=c(b),null===b.canvas?this._canvas=f(b.width,b.height):this._canvas=b.canvas,this._3D=new a(this._canvas),this._precision=b.precision,this._distanceMeasure=b.distanceMeasure,this._sites=[],this._maxDistance=Math.max(this._canvas.width,this._canvas.height),this._pointDG=d.distanceGeometry(this._maxDistance,this._precision,this._distanceMeasure)}function c(a,b){this._type=a,this._mesh=b}function d(a,b,d){c.call(this,f.point,d),this.x=a,this.y=b}THREE.CylinderGeometry.Cone=function(a,b,c){return new THREE.CylinderGeometry(0,a,b,c)},a.prototype={constructor:a,add:function(a){this._scene.add(a)},render:function(){this._renderer.render(this._scene,this._camera)},material:function(a){var b=a.getStyle();return this._material_cache.hasOwnProperty(b)||(this._material_cache[b]=new THREE.MeshBasicMaterial({color:a})),this._material_cache[b]}},b.prototype={constructor:b,point:function(a,b,c){c="string"==typeof c?new THREE.Color(c):new THREE.Color(c.r,c.g,c.b);var e=new THREE.Mesh(this._pointDG,this._3D.material(c)),f=new d(a,b,e);this._sites.push(f),this._3D.add(e)},render:function(){this._3D.render()},get canvas(){return this._canvas},get precision(){return this._precision},set precision(a){this._precision=a},get nSites(){return this._sites.length}};var e={euclidean:function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},manhattan:function(a,b){return Math.abs(a.x-b.x)+Math.abs(a.y-b.y)}};c.prototype={constructor:c,get type(){return this._type},get color(){return this._mesh.material.color}};var f={point:0};d.prototype=Object.create(c.prototype,{x:{get:function(){return this._mesh.position.x},set:function(a){this._mesh.position.x=a}},y:{get:function(){return this._mesh.position.y},set:function(a){this._mesh.position.y=a}}}),d.prototype.constructor=d,d.distanceGeometry=function(a,b,c){switch(c){case e.euclidean:return d.euclideanDistanceGeometry(a,b);default:var f=new THREE.Geometry,g=b,h=2*Math.PI/g,i=new THREE.Vector3(0,0,0);f.vertices.push(i);for(var j=0;g>j;++j){var k=h*j,l=new THREE.Vector2(a*Math.cos(k),a*Math.sin(k));f.vertices.push(new THREE.Vector3(l.x,l.y,-c(i,l)))}f.verticesNeedUpdate=!0;for(var m=0;g-1>m;++m)f.faces.push(new THREE.Face3(0,m+1,m+2));return f.faces.push(new THREE.Face3(0,g,1)),f.elementsNeedUpdate=!0,f}},d.euclideanDistanceGeometry=function(a,b){var c=THREE.CylinderGeometry.Cone(a,a,b),d=new THREE.Matrix4;d.makeRotationX(Math.PI/2);var e=new THREE.Matrix4;e.makeTranslation(0,-a/2,0);var f=new THREE.Matrix4;return f.multiplyMatrices(d,e),c.applyMatrix(f),c},"undefined"!=typeof window&&(window.Voronoi={Diagram:b,Distance:e,SiteType:f})}();